modules:

  - type: rpm-ostree
    repos:
      # COPR for nautilus-admin, enables shortcut 'Open as Admin' in Nautilus.
      - https://copr.fedorainfracloud.org/coprs/tomaszgasior/mushrooms/repo/fedora-%OS_VERSION%/tomaszgasior-mushrooms.repo
      # COPR for morewaita-icon-theme
      - https://copr.fedorainfracloud.org/coprs/dusansimic/themes/repo/fedora-%OS_VERSION%/dusansimic-themes.repo
    install:
      - gnome-shell-extension-appindicator
      - gnome-shell-extension-dash-to-panel
      - gnome-shell-extension-dash-to-dock
      - gnome-shell-extension-gsconnect
      - gnome-shell-extension-just-perfection
      - gnome-shell-extension-blur-my-shell
      - gnome-shell-extension-user-theme
      - gnome-shell-extension-caffeine
      - firewall-config
      - nautilus-admin # Enables shortcut 'Open as Admin' in Nautilus.
      - morewaita-icon-theme
    remove:
      - gnome-tour
      - gnome-shell-extension-apps-menu
      - gnome-shell-extension-background-logo
      - gnome-shell-extension-launch-new-instance
      - gnome-shell-extension-window-list
      - gnome-classic-session
      - gnome-classic-session-xsession

  - type: default-flatpaks
    source: ghcr.io/lorduskordus/bluebuild-modules
    system:
      install:
        - com.github.tchx84.Flatseal
        - com.mattjakeman.ExtensionManager
        - org.gnome.Calendar
        - org.gnome.FileRoller
        - org.gnome.Weather
        - org.gnome.baobab
        - org.gnome.clocks
        - org.gnome.TextEditor

  - type: bling
    install:
      - dconf-update-service

  - type: files
    files:
      - gnome/usr: /usr

  - type: justfiles
    source: ghcr.io/lorduskordus/bluebuild-modules
    validate: true
    include:
      - gnome

  - type: script
    scripts:
      - custom-dash-to-panel.sh

  - type: gnome-extensions
    install:
      - ArcMenu
      - Legacy (GTK3) Theme Scheme Auto Switcher
      - Night Theme Switcher
      - Tiling Assistant

  # Apply the triple buffer patch.
  - type: rpm-ostree-override
    source: ghcr.io/lorduskordus/bluebuild-modules
    repo: https://copr.fedorainfracloud.org/coprs/trixieua/mutter-patched/repo/fedora-%OS_VERSION%/trixieua-mutter-patched.repo
    replace:
      - gnome-shell
      - mutter
      - mutter-common
      - xorg-x11-server-Xwayland
      - gdm